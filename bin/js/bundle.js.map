{"version":3,"file":"bundle.js","sources":["../../src/ui/layaMaxUI.ts","../../src/script/GameControl.ts","../../src/script/GameUI.ts","../../src/script/Bullet.ts","../../src/script/DropBox.ts","../../src/GameConfig.ts","../../src/script/manager/Uimanager.ts","../../src/INITConfig.ts","../../src/script/ui/AbsBaseView.ts","../../src/script/ui/BaseView.ts","../../src/script/view/LoginView.ts","../../src/InitConfig.ts","../../src/script/util/Log.ts","../../src/script/net/NetWork.ts","../../src/Main.ts"],"sourcesContent":["/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */\nimport View=Laya.View;\r\nimport Dialog=Laya.Dialog;\r\nimport Scene=Laya.Scene;\nvar REG: Function = Laya.ClassUtils.regClass;\nexport module ui.test {\r\n    export class TestSceneUI extends Scene {\r\n\t\tpublic scoreLbl:Laya.Label;\n\t\tpublic tipLbll:Laya.Label;\n        public static  uiView:any ={\"type\":\"Scene\",\"props\":{\"width\":640,\"runtime\":\"script/GameUI.ts\",\"name\":\"gameBox\",\"height\":1136},\"compId\":1,\"child\":[{\"type\":\"Sprite\",\"props\":{\"y\":1116,\"x\":-83,\"width\":805,\"texture\":\"test/block.png\",\"name\":\"ground\",\"height\":20},\"compId\":3,\"child\":[{\"type\":\"Script\",\"props\":{\"y\":0,\"x\":0,\"width\":805,\"label\":\"ground\",\"height\":20,\"runtime\":\"laya.physics.BoxCollider\"},\"compId\":5},{\"type\":\"Script\",\"props\":{\"type\":\"static\",\"runtime\":\"laya.physics.RigidBody\"},\"compId\":6}]},{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"name\":\"gameBox\"},\"compId\":18},{\"type\":\"Sprite\",\"props\":{\"y\":0,\"x\":0,\"name\":\"UI\"},\"compId\":14,\"child\":[{\"type\":\"Label\",\"props\":{\"y\":50,\"x\":158,\"width\":272,\"var\":\"scoreLbl\",\"height\":47,\"fontSize\":40,\"color\":\"#51c524\",\"align\":\"center\"},\"compId\":17},{\"type\":\"Label\",\"props\":{\"y\":0,\"x\":0,\"width\":640,\"var\":\"tipLbll\",\"valign\":\"middle\",\"text\":\"别让箱子掉下来\\\\n\\\\n点击屏幕开始游戏\",\"height\":1136,\"fontSize\":40,\"color\":\"#c6302e\",\"align\":\"center\"},\"compId\":16}]},{\"type\":\"Script\",\"props\":{\"enabled\":true,\"dropBox\":\"@Prefab:prefab/DropBox.prefab\",\"bullet\":\"@Prefab:prefab/Bullet.prefab\",\"runtime\":\"script/GameControl.ts\"},\"compId\":20}],\"loadList\":[\"test/block.png\",\"prefab/DropBox.prefab\",\"prefab/Bullet.prefab\"],\"loadList3D\":[]};\r\n        constructor(){ super()}\r\n        createChildren():void {\r\n            super.createChildren();\r\n            this.createView(TestSceneUI.uiView);\r\n        }\r\n    }\r\n    REG(\"ui.test.TestSceneUI\",TestSceneUI);\r\n}\r","\r\nimport DropBox from \"./DropBox\";\r\nimport Bullet from \"./Bullet\";\r\n/**\r\n * 游戏控制脚本。定义了几个dropBox，bullet，createBoxInterval等变量，能够在IDE显示及设置该变量\r\n * 更多类型定义，请参考官方文档\r\n */\r\nexport default class GameControl extends Laya.Script {\r\n    /** @prop {name:dropBox,tips:\"掉落容器预制体对象\",type:Prefab}*/\r\n    dropBox: Laya.Prefab;\r\n    /** @prop {name:bullet,tips:\"子弹预制体对象\",type:Prefab}*/\r\n    bullet: Laya.Prefab;\r\n    /** @prop {name:createBoxInterval,tips:\"间隔多少毫秒创建一个下跌的容器\",type:int,default:1000}*/\r\n    createBoxInterval: number = 1000;\r\n    /**开始时间*/\r\n    private _time: number = 0;\r\n    /**是否已经开始游戏 */\r\n    private _started: boolean = false;\r\n    /**子弹和盒子所在的容器对象 */\r\n    private _gameBox: Laya.Sprite;\r\n\r\n    constructor() { super(); }\r\n\r\n    onEnable(): void {\r\n        this._time = Date.now();\r\n        this._gameBox = this.owner.getChildByName(\"gameBox\") as Laya.Sprite;\r\n    }\r\n\r\n    onUpdate(): void {\r\n        //每间隔一段时间创建一个盒子\r\n        let now = Date.now();\r\n        if (now - this._time > this.createBoxInterval&&this._started) {\r\n            this._time = now;\r\n            this.createBox();\r\n        }\r\n    }\r\n\r\n    createBox(): void {\r\n        //使用对象池创建盒子\r\n        let box: Laya.Sprite = Laya.Pool.getItemByCreateFun(\"dropBox\", this.dropBox.create, this.dropBox);\r\n        box.pos(Math.random() * (Laya.stage.width - 100), -100);\r\n        this._gameBox.addChild(box);\r\n    }\r\n\r\n    onStageClick(e: Laya.Event): void {\r\n        //停止事件冒泡，提高性能，当然也可以不要\r\n        e.stopPropagation();\r\n        //舞台被点击后，使用对象池创建子弹\r\n        let flyer: Laya.Sprite = Laya.Pool.getItemByCreateFun(\"bullet\", this.bullet.create, this.bullet);\r\n        flyer.pos(Laya.stage.mouseX, Laya.stage.mouseY);\r\n        this._gameBox.addChild(flyer);\r\n    }\r\n\r\n    /**开始游戏，通过激活本脚本方式开始游戏*/\r\n    startGame(): void {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this.enabled = true;\r\n        }\r\n    }\r\n\r\n    /**结束游戏，通过非激活本脚本停止游戏 */\r\n    stopGame(): void {\r\n        this._started = false;\r\n        this.enabled = false;\r\n        this.createBoxInterval = 1000;\r\n        this._gameBox.removeChildren();\r\n    }\r\n}","import { ui } from \"./../ui/layaMaxUI\";\r\nimport GameControl from \"./GameControl\"\r\n/**\r\n * 本示例采用非脚本的方式实现，而使用继承页面基类，实现页面逻辑。在IDE里面设置场景的Runtime属性即可和场景进行关联\r\n * 相比脚本方式，继承式页面类，可以直接使用页面定义的属性（通过IDE内var属性定义），比如this.tipLbll，this.scoreLbl，具有代码提示效果\r\n * 建议：如果是页面级的逻辑，需要频繁访问页面内多个元素，使用继承式写法，如果是独立小模块，功能单一，建议用脚本方式实现，比如子弹脚本。\r\n */\r\nexport default class GameUI extends ui.test.TestSceneUI {\r\n    /**设置单例的引用方式，方便其他类引用 */\r\n    static instance: GameUI;\r\n    /**当前游戏积分字段 */\r\n    private _score: number;\r\n    /**游戏控制脚本引用，避免每次获取组件带来不必要的性能开销 */\r\n    private _control: GameControl;\r\n\r\n    constructor() {\r\n        super();\r\n        GameUI.instance = this;\r\n        //关闭多点触控，否则就无敌了\r\n        Laya.MouseManager.multiTouchEnabled = false;\r\n    }\r\n\r\n    onEnable(): void {\r\n        this._control = this.getComponent(GameControl);\r\n        //点击提示文字，开始游戏\r\n        this.tipLbll.on(Laya.Event.CLICK, this, this.onTipClick);\r\n    }\r\n\r\n    onTipClick(e: Laya.Event): void {\r\n        this.tipLbll.visible = false;\r\n        this._score = 0;\r\n        this.scoreLbl.text = \"\";\r\n        this._control.startGame();\r\n    }\r\n\r\n    /**增加分数 */\r\n    addScore(value: number = 1): void {\r\n        this._score += value;\r\n        this.scoreLbl.changeText(\"分数：\" + this._score);\r\n        //随着分数越高，难度增大\r\n        if (this._control.createBoxInterval > 600 && this._score % 20 == 0) this._control.createBoxInterval -= 20;\r\n    }\r\n\r\n    /**停止游戏 */\r\n    stopGame(): void {\r\n        this.tipLbll.visible = true;\r\n        this.tipLbll.text = \"游戏结束了，点击屏幕重新开始\";\r\n        this._control.stopGame();\r\n    }\r\n}","/**\r\n * 子弹脚本，实现子弹飞行逻辑及对象池回收机制\r\n */\r\nexport default class Bullet extends Laya.Script {\r\n    constructor() { super(); }\r\n\r\n    onEnable(): void {\r\n        //设置初始速度\r\n        var rig: Laya.RigidBody = this.owner.getComponent(Laya.RigidBody);\r\n        rig.setVelocity({ x: 0, y: -10 });\r\n    }\r\n\r\n    onTriggerEnter(other: any, self: any, contact: any): void {\r\n        //如果被碰到，则移除子弹\r\n        this.owner.removeSelf();\r\n    }\r\n\r\n    onUpdate(): void {\r\n        //如果子弹超出屏幕，则移除子弹\r\n        if ((this.owner as Laya.Sprite).y < -10) {\r\n            this.owner.removeSelf();\r\n        }\r\n    }\r\n\r\n    onDisable(): void {\r\n        //子弹被移除时，回收子弹到对象池，方便下次复用，减少对象创建开销\r\n        Laya.Pool.recover(\"bullet\", this.owner);\r\n    }\r\n}","import GameUI from \"./GameUI\";\r\n/**\r\n * 掉落盒子脚本，实现盒子碰撞及回收流程\r\n */\r\nexport default class DropBox extends Laya.Script {\r\n    /**盒子等级 */\r\n    level: number = 1;\r\n    /**等级文本对象引用 */\r\n    private _text: Laya.Text;\r\n    /**刚体对象引用 */\r\n    private _rig: Laya.RigidBody\r\n\r\n    constructor() { super(); }\r\n    onEnable(): void {\r\n        /**获得组件引用，避免每次获取组件带来不必要的查询开销 */\r\n        this._rig = this.owner.getComponent(Laya.RigidBody);\r\n        this.level = Math.round(Math.random() * 5) + 1;\r\n        this._text = this.owner.getChildByName(\"levelTxt\") as Laya.Text;\r\n        this._text.text = this.level + \"\";\r\n    }\r\n\r\n    onUpdate(): void {\r\n        //让持续盒子旋转\r\n        (this.owner as Laya.Sprite).rotation++;\r\n    }\r\n\r\n    onTriggerEnter(other: any, self: any, contact: any): void {\r\n        var owner: Laya.Sprite = this.owner as Laya.Sprite;\r\n        if (other.label === \"buttle\") {\r\n            //碰撞到子弹后，增加积分，播放声音特效\r\n            if (this.level > 1) {\r\n                this.level--;\r\n                this._text.changeText(this.level + \"\");\r\n                owner.getComponent(Laya.RigidBody).setVelocity({ x: 0, y: -10 });\r\n                Laya.SoundManager.playSound(\"sound/hit.wav\");\r\n            } else {\r\n                if (owner.parent) {\r\n                    let effect: Laya.Animation = Laya.Pool.getItemByCreateFun(\"effect\", this.createEffect, this);\r\n                    effect.pos(owner.x, owner.y);\r\n                    owner.parent.addChild(effect);\r\n                    effect.play(0, true);\r\n                    owner.removeSelf();\r\n                    Laya.SoundManager.playSound(\"sound/destroy.wav\");\r\n                }\r\n            }\r\n            GameUI.instance.addScore(1);\r\n        } else if (other.label === \"ground\") {\r\n            //只要有一个盒子碰到地板，则停止游戏\r\n            owner.removeSelf();\r\n            GameUI.instance.stopGame();\r\n        }\r\n    }\r\n\r\n    /**使用对象池创建爆炸动画 */\r\n    createEffect(): Laya.Animation {\r\n        let ani: Laya.Animation = new Laya.Animation();\r\n        ani.loadAnimation(\"test/TestAni.ani\");\r\n        ani.on(Laya.Event.COMPLETE, null, recover);\r\n        function recover(): void {\r\n            ani.removeSelf();\r\n            Laya.Pool.recover(\"effect\", ani);\r\n        }\r\n        return ani;\r\n    }\r\n\r\n    onDisable(): void {\r\n        //盒子被移除时，回收盒子到对象池，方便下次复用，减少对象创建开销。\r\n        Laya.Pool.recover(\"dropBox\", this.owner);\r\n    }\r\n}","/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */\r\nimport GameUI from \"./script/GameUI\"\nimport GameControl from \"./script/GameControl\"\nimport Bullet from \"./script/Bullet\"\nimport DropBox from \"./script/DropBox\"\r\n/*\r\n* 游戏初始化配置;\r\n*/\r\nexport default class GameConfig{\r\n    static width:number=640;\r\n    static height:number=1136;\r\n    static scaleMode:string=\"fixedwidth\";\r\n    static screenMode:string=\"none\";\r\n    static alignV:string=\"top\";\r\n    static alignH:string=\"left\";\r\n    static startScene:any=\"test/TestScene.scene\";\r\n    static sceneRoot:string=\"\";\r\n    static debug:boolean=false;\r\n    static stat:boolean=false;\r\n    static physicsDebug:boolean=false;\r\n    static exportSceneToJson:boolean=true;\r\n    constructor(){}\r\n    static init(){\r\n        var reg: Function = Laya.ClassUtils.regClass;\r\n        reg(\"script/GameUI.ts\",GameUI);\n        reg(\"script/GameControl.ts\",GameControl);\n        reg(\"script/Bullet.ts\",Bullet);\n        reg(\"script/DropBox.ts\",DropBox);\r\n    }\r\n}\r\nGameConfig.init();","export class UiManager{\r\n    private mPanelArr: Array<any>;\r\n    private static instance:UiManager;\r\n\r\n    private constructor(){\r\n        this.mPanelArr = [];\r\n    }\r\n    public static getInstance():UiManager{\r\n        if(!UiManager.instance){\r\n            UiManager.instance = new UiManager();\r\n        }\r\n        return UiManager.instance;\r\n    }\r\n    openPanel(view:any){\r\n        console.log(\"openPanel....resName=\"+view.resName+\"packageName=\"+view.packageName);\r\n        let openPanel = new view(view.resName,view.packageName);\r\n        openPanel.packageName = view.packageName;\r\n        this.mPanelArr.push(openPanel);\r\n    }\r\n\r\n    closePanel(view:any){\r\n        let findIndex:number = -1;\r\n        for (let index = 0; index < this.mPanelArr.length; index++) {\r\n            const element = this.mPanelArr[index];\r\n            console.log(\"for index----=\"+element.packageName)\r\n            if(element.packageName == view.packageName){\r\n                element.destroy();\r\n                findIndex = index;\r\n                console.log(\"find it\");\r\n                break;\r\n            }  \r\n        }\r\n        if(findIndex >= 0){\r\n            this.mPanelArr.splice(findIndex);\r\n        }\r\n    }\r\n\r\n}","\r\n/*\r\n* 初始化配置;\r\n*/\r\nexport default class InitConfig{\r\n\r\n    static resPrefixPath:string = \"res/ui/\";\r\n    static isDebug:boolean = true;\r\n    static serverUrl:string = \"ws://echo.websocket.org:80\";\r\n\r\n}","export abstract class AbsBaseView{\r\n\r\n    abstract initData();\r\n    abstract initView();\r\n    abstract registerEvent();\r\n    abstract unRegisterEvent();\r\n\r\n}\r\n","\r\nimport InitConfig from \"../../INITConfig\";\r\nimport { AbsBaseView } from \"./AbsBaseView\";\r\n\r\nexport module topUi {\r\n\r\n    export class BaseView  extends AbsBaseView{\r\n\r\n        private mParentView: fgui.GComponent;\r\n        private mResName:string;\r\n        private mPackageName:string;\r\n        constructor(resName:string,packageName:string) {\r\n            super();\r\n            this.mResName = resName;\r\n            this.mPackageName = packageName;\r\n            this.loadRes();\r\n        }\r\n        init(){\r\n            //初始化Data\r\n            this.initData();\r\n            //注册事件监听\r\n            this.registerEvent();\r\n            //初始化UI控件引用\r\n            this.initView();\r\n        }\r\n        initData() {\r\n            throw new Error(\"Method not implemented.\");\r\n        }\r\n        initView() {\r\n            throw new Error(\"Method not implemented.\");\r\n        }\r\n        registerEvent() {\r\n            throw new Error(\"Method not implemented.\");\r\n        }\r\n        unRegisterEvent() {\r\n            throw new Error(\"Method not implemented.\");\r\n        }\r\n        destroy() {\r\n            this.unRegisterEvent();\r\n            fgui.GRoot.inst.removeChild(this.mParentView);\r\n        }\r\n        //加载资源\r\n        loadRes(){\r\n            if(!this.mResName){\r\n                throw new Error(\"BaseView need respath to init\")\r\n            }\r\n            \r\n            let resPath = InitConfig.resPrefixPath+this.mResName;\r\n            fgui.UIPackage.loadPackage(resPath, Laya.Handler.create(this, this.onLoadedComplete));\r\n        }\r\n        onLoadedComplete(){\r\n            if(!this.mPackageName){\r\n                throw new Error(\"BaseView need packageName to create ui\")\r\n            }\r\n            this.mParentView = fgui.UIPackage.createObject(this.mResName, this.mPackageName).asCom;\r\n            fgui.GRoot.inst.addChild(this.mParentView);\r\n            this.init();\r\n        }\r\n        //卸载资源\r\n        removeRes(){\r\n\r\n        }\r\n        getParent(){\r\n            return this.mParentView\r\n        }\r\n        getChild(childName:string){\r\n            if(this.mParentView){\r\n                return this.mParentView.getChild(childName)\r\n            }\r\n            return null;\r\n        }\r\n        //显示loading\r\n\r\n        //关掉loading\r\n\r\n    }\r\n}","\r\nimport { topUi } from \"../ui/BaseView\";\r\nexport module view{\r\n\r\n    export class LoginView extends topUi.BaseView{\r\n        public static resName:string = \"Login\";\r\n        public static packageName:string = \"LoginView\"\r\n        initData() {\r\n            \r\n        }\r\n        initView() {\r\n            let bg:fgui.GImage = this.getChild(\"bg\").asImage;\r\n            bg.scaleX = 0.1;\r\n            console.log(\"initView.......\");\r\n        }\r\n        registerEvent() {\r\n            console.log(\"loginView registerEvent\");\r\n            // Game.NotificationCenter.getInstance().registerEvt(new Game.EventSelf(\"loginInit\",this,this.onLoginInit))\r\n        }\r\n        onLoginInit(arg0:any,arg1:any){\r\n            console.log(\"reveice loginInit method  arg0=\"+arg0+\"arg1=\"+arg1);\r\n        }\r\n        unRegisterEvent() {\r\n            \r\n        }\r\n        destroy() {\r\n            super.destroy();\r\n        }\r\n    }\r\n}","\r\n/*\r\n* 初始化配置;\r\n*/\r\nexport default class InitConfig{\r\n\r\n    static resPrefixPath:string = \"res/ui/\";\r\n    static isDebug:boolean = true;\r\n    static serverUrl:string = \"ws://echo.websocket.org:80\";\r\n\r\n}","import InitConfig from \"../../InitConfig\";\r\n\r\nexport class Log{\r\n    \r\n    static warn(params:any) {\r\n        if(InitConfig.isDebug){\r\n            console.warn(params);\r\n        }\r\n    }\r\n\r\n    static info(params:any){\r\n        if(InitConfig.isDebug){\r\n            console.info(params);\r\n        }\r\n    }\r\n    static table(params:any){\r\n        if(InitConfig.isDebug){\r\n            console.table(params);\r\n        }\r\n    }\r\n\r\n}","import { Log } from \"../util/Log\";\r\n\r\nexport module net\r\n{\r\n\timport Loader = Laya.Loader;\r\n\timport Browser = Laya.Browser;\r\n\timport Handler = Laya.Handler;\r\n\timport Socket = Laya.Socket;\r\n\timport Byte = Laya.Byte;\r\n\timport Event = Laya.Event;\r\n\t\r\n\texport class NetWork \r\n\t{\r\n\t\t\r\n\t\tprivate static instance:NetWork;\r\n\t\tprivate mMessage:any = null;\r\n\t\tprivate mRoot:any = null;\r\n\t\tprivate socket: Socket;\r\n\t\tprivate output: Byte;\r\n\r\n\t\tprivate constructor()\r\n\t\t{\r\n\t\t\tlet protoBuf:any = Browser.window.protobuf;\r\n\t\t\tprotoBuf.load(\"res/protobuf/awesome.proto\", (err:any, root:any)=>{this.onAssetsLoaded(err,root)});\r\n\t\t\tconsole.log(\"NetWork  constructor()\");\r\n\t\t}\r\n\t\tpublic static getInstance():NetWork{\r\n\t\t\tif(!NetWork.instance){\r\n\t\t\t\tNetWork.instance = new NetWork();\r\n\t\t\t}\r\n\t\t\treturn NetWork.instance;\r\n\t\t}\r\n\t\t\r\n\t\tprivate onAssetsLoaded(err:any, root:any):void\r\n\t\t{\r\n\t\t\tconsole.log(\"NetWork onAssetsLoaded\"+err);\r\n\t\t\tif (err)\r\n\t\t\t\tthrow err;\r\n\t\t\tconsole.log(\"this=\"+this);\r\n\t\t\tconsole.log(\"root=\",root);\r\n\t\t\tthis.mRoot = root;\r\n\t\t\t// Obtain a message type\r\n\t\t\tthis.mMessage = root.lookup(\"awesomepackage.AwesomeMessage\");\r\n\t\t\tconsole.log(\"this.mMessage--->>\"+ this.mMessage);\r\n\t\t\t// Create a new message\r\n\t\t\tvar message:any = this.mMessage.create(\r\n\t\t\t{\r\n\t\t\t\tawesomeField: \"AwesomeString\"\r\n\t\t\t});\r\n\r\n\t\t\t// Verify the message if necessary (i.e. when possibly incomplete or invalid)\r\n\t\t\tvar errMsg:any = this.mMessage.verify(message);\r\n\t\t\tif (errMsg)\r\n\t\t\t\tthrow Error(errMsg);\r\n\r\n\t\t\t// Encode a message to an Uint8Array (browser) or Buffer (node)\r\n\t\t\tvar buffer:any = this.mMessage.encode(message).finish();\r\n\t\t\t// ... do something with buffer\r\n\r\n\r\n\t\t\t// Or, encode a plain object\r\n\t\t\tvar buffer:any = this.mMessage.encode(\r\n\t\t\t{\r\n\t\t\t\tawesomeField: \"AwesomeString\"\r\n\t\t\t}).finish();\r\n\t\t\t// ... do something with buffer\r\n\r\n\t\t\t// Decode an Uint8Array (browser) or Buffer (node) to a message\r\n\t\t\tvar message:any = this.mMessage.decode(buffer);\r\n\t\t\tconsole.log(\"message = \"+message+\"\"+JSON.stringify(message));\r\n\t\t\t// ... do something with message\r\n\t\t\t// this.connectByUrl(\"ws://192.168.3.3:8080\");\r\n\t\t\t// this.connectByUrl(\"ws://192.168.3.27:8080\");\r\n\t\t\t// this.connectByUrl(\"ws://192.168.3.27:8080\");\r\n\t\t\tthis.connectByUrl(\"ws://127.0.0.1:8080\");\r\n\r\n\t\t}\r\n\r\n\t\tprivate connectByUrl(url:string): void {\r\n\t\t\tLog.info(\"connectByUrl\");\r\n\t\t\tthis.socket = new Socket();\r\n\t\t\t//this.socket.connect(\"echo.websocket.org\", 80);\r\n\t\t\t// this.socket.connectByUrl(\"ws://echo.websocket.org:80\");\r\n\t\t\tthis.socket.connectByUrl(url);\r\n\r\n\t\t\tthis.output = this.socket.output;\r\n\r\n\t\t\tthis.socket.on(Event.OPEN, this, this.onSocketOpen);\r\n\t\t\tthis.socket.on(Event.CLOSE, this, this.onSocketClose);\r\n\t\t\tthis.socket.on(Event.MESSAGE, this, this.onMessageReveived);\r\n\t\t\tthis.socket.on(Event.ERROR, this, this.onConnectError);\r\n\t\t}\r\n\r\n\t\tprivate onSocketOpen(): void {\r\n\t\t\tconsole.log(\"Connected\");\r\n\t\t\tthis.output\r\n\t\t\t//test\r\n\t\t\tlet msgHead = 10001;\r\n\t\t\tthis.output.writeUint16(msgHead);\r\n\r\n\t\t\tthis.mMessage = this.mRoot.lookup(\"awesomepackage.C2R_Login\");\r\n\t\t\tconsole.log(\"this.mMessage--->>\"+ this.mMessage);\r\n\t\t\t// Create a new message\r\n\t\t\tlet message:any = this.mMessage.create(\r\n\t\t\t\t{rpcId:1, account:\"test\", password:\"111111\" });\r\n\r\n\t\t\t// Verify the message if necessary (i.e. when possibly incomplete or invalid)\r\n\t\t\tvar errMsg:any = this.mMessage.verify(message);\r\n\t\t\tif (errMsg)\r\n\t\t\t\tthrow Error(errMsg);\r\n\r\n\t\t\t// Encode a message to an Uint8Array (browser) or Buffer (node)\r\n\t\t\tvar buffer:any = this.mMessage.encode(message).finish();\r\n\t\t\t// this.output.writeArrayBuffer(buffer,2)\r\n\t\t\t\r\n\t\t\t// Log.info(\"msg length=\"+msgHead.length);\r\n\t\t\t// this.output.writeUTFString(msgHead);\r\n\r\n\t\t\t// 发送字符串\r\n\t\t\t// this.socket.send(\"demonstrate <sendString>\");\r\n\r\n\t\t\t// // 使用output.writeByte发送\r\n\t\t\t// var message: string = \"demonstrate <output.writeByte>\";\r\n\t\t\t// for (var i: number = 0; i < message.length; ++i) {\r\n\t\t\t// \tthis.output.writeByte(message.charCodeAt(i));\r\n\t\t\t// }\r\n\t\t\tthis.socket.flush();\r\n\t\t\tconsole.log(\"消息发送完成\");\r\n\t\t}\r\n\r\n\t\tprivate onSocketClose(): void {\r\n\t\t\tconsole.log(\"Socket closed\");\r\n\t\t}\r\n\r\n\t\tprivate onMessageReveived(message: any): void {\r\n\t\t\tconsole.log(\"Message from server:\");\r\n\t\t\tif (typeof message == \"string\") {\r\n\t\t\t\tconsole.log(message);\r\n\t\t\t}\r\n\t\t\telse if (message instanceof ArrayBuffer) {\r\n\t\t\t\tconsole.log(new Byte(message).readUTFBytes());\r\n\t\t\t}\r\n\t\t\tthis.socket.input.clear();\r\n\t\t}\r\n\r\n\t\tprivate onConnectError(e: Event): void {\r\n\t\t\tconsole.log(\"error=\"+JSON.stringify(e));\r\n\t\t}\r\n\t}\r\n}\r\n","import GameConfig from \"./GameConfig\";\r\nimport { UiManager } from \"./script/manager/Uimanager\";\r\nimport { view } from \"./script/view/LoginView\";\r\nimport \"./script/net/NetWork\"\r\nimport { net } from \"./script/net/NetWork\";\r\nimport { Log } from \"./script/util/Log\";\r\n\r\nclass Main {\r\n\tconstructor() {\r\n\t\t//根据IDE设置初始化引擎\t\t\r\n\t\tif (window[\"Laya3D\"]) Laya3D.init(GameConfig.width, GameConfig.height);\r\n\t\telse Laya.init(GameConfig.width, GameConfig.height, Laya[\"WebGL\"]);\r\n\t\tLaya[\"Physics\"] && Laya[\"Physics\"].enable();\r\n\t\tLaya[\"DebugPanel\"] && Laya[\"DebugPanel\"].enable();\r\n\t\tLaya.stage.scaleMode = GameConfig.scaleMode;\r\n\t\tLaya.stage.screenMode = GameConfig.screenMode;\r\n\t\tLaya.stage.alignV = GameConfig.alignV;\r\n\t\tLaya.stage.alignH = GameConfig.alignH;\r\n\t\t//兼容微信不支持加载scene后缀场景\r\n\t\tLaya.URL.exportSceneToJson = GameConfig.exportSceneToJson;\r\n\r\n\t\t//打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）\r\n\t\tif (GameConfig.debug || Laya.Utils.getQueryString(\"debug\") == \"true\") Laya.enableDebugPanel();\r\n\t\tif (GameConfig.physicsDebug && Laya[\"PhysicsDebugDraw\"]) Laya[\"PhysicsDebugDraw\"].enable();\r\n\t\tif (GameConfig.stat) Laya.Stat.show();\r\n\t\tLaya.alertGlobalError(true);\r\n\r\n\t\t//激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程\r\n\t\tLaya.ResourceVersion.enable(\"version.json\", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);\r\n\t\t\r\n\t}\r\n\r\n\tonVersionLoaded(): void {\r\n\t\t//激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图\r\n\t\tLaya.AtlasInfoManager.enable(\"fileconfig.json\", Laya.Handler.create(this, this.onConfigLoaded));\r\n\t}\r\n\r\n\tonConfigLoaded(): void {\r\n\t\tLaya.stage.addChild(fgui.GRoot.inst.displayObject);\r\n\t\t//加载IDE指定的场景\r\n\t\t// GameConfig.startScene && Laya.Scene.open(GameConfig.startScene);\r\n\t\t// new view.LoginView(\"Login\",\"LoginView\");\r\n\t\tUiManager.getInstance().openPanel(view.LoginView);\r\n\r\n\t\tLaya.timer.once(2000,this,()=>{\r\n\t\t\tconsole.log(\"1111111111\");\r\n\t\t\t// UiManager.getInstance().closePanel(view.LoginView);\r\n\t\t\t// Game.NotificationCenter.getInstance().notification(\"loginInit\",\"111\",\"222\");\r\n\t\t})\r\n\t\tconsole.log(\"test protocolBuffer\");\r\n\t\tnet.NetWork.getInstance();\r\n\r\n\t\tLog.info(\"Laya.Browser.clientWidth=\"+Laya.Browser.clientWidth+\"Laya.Browser.clientHeight=\"+Laya.Browser.clientHeight);\r\n\r\n\t}\r\n}\r\n//激活启动类\r\nnew Main();\r\n"],"names":["InitConfig"],"mappings":"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"}