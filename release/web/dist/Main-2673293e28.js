parcelRequire=function(e,t,s,i){var o,a="function"==typeof parcelRequire&&parcelRequire,n="function"==typeof require&&require;function newRequire(s,i){if(!t[s]){if(!e[s]){var o="function"==typeof parcelRequire&&parcelRequire;if(!i&&o)return o(s,!0);if(a)return a(s,!0);if(n&&"string"==typeof s)return n(s);var r=new Error("Cannot find module '"+s+"'");throw r.code="MODULE_NOT_FOUND",r}localRequire.resolve=function(t){return e[s][1][t]||t},localRequire.cache={};var l=t[s]=new newRequire.Module(s);e[s][0].call(l.exports,localRequire,l,l.exports,this)}return t[s].exports;function localRequire(e){return newRequire(localRequire.resolve(e))}}newRequire.isParcelRequire=!0,newRequire.Module=function(e){this.id=e,this.bundle=newRequire,this.exports={}},newRequire.modules=e,newRequire.cache=t,newRequire.parent=a,newRequire.register=function(t,s){e[t]=[function(e,t){t.exports=s},{}]};for(var r=0;r<s.length;r++)try{newRequire(s[r])}catch(e){o||(o=e)}if(s.length){var l=newRequire(s[s.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd&&define(function(){return l})}if(parcelRequire=newRequire,o)throw o;return newRequire}({"ui/layaMaxUI.ts":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ui=void 0;var i,o=Laya.Scene,a=Laya.ClassUtils.regClass;s.ui=i,function(e){!function(e){class t extends o{constructor(){super()}createChildren(){super.createChildren(),this.loadScene("test/TestScene")}}e.TestSceneUI=t,a("ui.test.TestSceneUI",t)}(e.test||(e.test={}))}(i||(s.ui=i={}))},{}],"script/GameControl.ts":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;s.default=class extends Laya.Script{constructor(){super(),this.createBoxInterval=1e3,this._time=0,this._started=!1}onEnable(){this._time=Date.now(),this._gameBox=this.owner.getChildByName("gameBox")}onUpdate(){let e=Date.now();e-this._time>this.createBoxInterval&&this._started&&(this._time=e,this.createBox())}createBox(){let e=Laya.Pool.getItemByCreateFun("dropBox",this.dropBox.create,this.dropBox);e.pos(Math.random()*(Laya.stage.width-100),-100),this._gameBox.addChild(e)}onStageClick(e){e.stopPropagation();let t=Laya.Pool.getItemByCreateFun("bullet",this.bullet.create,this.bullet);t.pos(Laya.stage.mouseX,Laya.stage.mouseY),this._gameBox.addChild(t)}startGame(){this._started||(this._started=!0,this.enabled=!0)}stopGame(){this._started=!1,this.enabled=!1,this.createBoxInterval=1e3,this._gameBox.removeChildren()}}},{}],"script/GameUI.ts":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i,o=e("./../ui/layaMaxUI"),a=(i=e("./GameControl"))&&i.__esModule?i:{default:i};class n extends o.ui.test.TestSceneUI{constructor(){super(),n.instance=this,Laya.MouseManager.multiTouchEnabled=!1}onEnable(){this._control=this.getComponent(a.default),this.tipLbll.on(Laya.Event.CLICK,this,this.onTipClick)}onTipClick(e){this.tipLbll.visible=!1,this._score=0,this.scoreLbl.text="",this._control.startGame()}addScore(e=1){this._score+=e,this.scoreLbl.changeText("分数："+this._score),this._control.createBoxInterval>600&&this._score%20==0&&(this._control.createBoxInterval-=20)}stopGame(){this.tipLbll.visible=!0,this.tipLbll.text="游戏结束了，点击屏幕重新开始",this._control.stopGame()}}s.default=n},{"./../ui/layaMaxUI":"ui/layaMaxUI.ts","./GameControl":"script/GameControl.ts"}],"script/Bullet.ts":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;s.default=class extends Laya.Script{constructor(){super()}onEnable(){this.owner.getComponent(Laya.RigidBody).setVelocity({x:0,y:-10})}onTriggerEnter(e,t,s){this.owner.removeSelf()}onUpdate(){this.owner.y<-10&&this.owner.removeSelf()}onDisable(){Laya.Pool.recover("bullet",this.owner)}}},{}],"script/DropBox.ts":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i,o=(i=e("./GameUI"))&&i.__esModule?i:{default:i};s.default=class extends Laya.Script{constructor(){super(),this.level=1}onEnable(){this._rig=this.owner.getComponent(Laya.RigidBody),this.level=Math.round(5*Math.random())+1,this._text=this.owner.getChildByName("levelTxt"),this._text.text=this.level+""}onUpdate(){this.owner.rotation++}onTriggerEnter(e,t,s){var i=this.owner;if("buttle"===e.label){if(this.level>1)this.level--,this._text.changeText(this.level+""),i.getComponent(Laya.RigidBody).setVelocity({x:0,y:-10}),Laya.SoundManager.playSound("sound/hit.wav");else if(i.parent){let e=Laya.Pool.getItemByCreateFun("effect",this.createEffect,this);e.pos(i.x,i.y),i.parent.addChild(e),e.play(0,!0),i.removeSelf(),Laya.SoundManager.playSound("sound/destroy.wav")}o.default.instance.addScore(1)}else"ground"===e.label&&(i.removeSelf(),o.default.instance.stopGame())}createEffect(){let e=new Laya.Animation;return e.loadAnimation("test/TestAni.ani"),e.on(Laya.Event.COMPLETE,null,function(){e.removeSelf(),Laya.Pool.recover("effect",e)}),e}onDisable(){Laya.Pool.recover("dropBox",this.owner)}}},{"./GameUI":"script/GameUI.ts"}],"GameConfig.ts":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i=_interopRequireDefault(e("./script/GameUI")),o=_interopRequireDefault(e("./script/GameControl")),a=_interopRequireDefault(e("./script/Bullet")),n=_interopRequireDefault(e("./script/DropBox"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}class r{constructor(){}static init(){var e=Laya.ClassUtils.regClass;e("script/GameUI.ts",i.default),e("script/GameControl.ts",o.default),e("script/Bullet.ts",a.default),e("script/DropBox.ts",n.default)}}s.default=r,r.width=640,r.height=1136,r.scaleMode="fixedwidth",r.screenMode="none",r.alignV="top",r.alignH="left",r.startScene="test/TestScene.scene",r.sceneRoot="",r.debug=!1,r.stat=!1,r.physicsDebug=!1,r.exportSceneToJson=!0,r.init()},{"./script/GameUI":"script/GameUI.ts","./script/GameControl":"script/GameControl.ts","./script/Bullet":"script/Bullet.ts","./script/DropBox":"script/DropBox.ts"}],"script/manager/Uimanager.ts":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.UiManager=void 0;class i{constructor(){this.mPanelArr=[]}static getInstance(){return i.instance||(i.instance=new i),i.instance}openPanel(e){console.log("openPanel....resName="+e.resName+"packageName="+e.packageName);let t=new e(e.resName,e.packageName);t.packageName=e.packageName,this.mPanelArr.push(t)}closePanel(e){let t=-1;for(let s=0;s<this.mPanelArr.length;s++){const i=this.mPanelArr[s];if(console.log("for index----="+i.packageName),i.packageName==e.packageName){i.destroy(),t=s,console.log("find it");break}}t>=0&&this.mPanelArr.splice(t)}}s.UiManager=i},{}],"INITConfig.ts":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;class i{}s.default=i,i.resPrefixPath="res/ui/",i.isDebug=!0,i.serverUrl="ws://echo.websocket.org:80"},{}],"script/ui/AbsBaseView.ts":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.AbsBaseView=void 0;s.AbsBaseView=class{}},{}],"script/ui/BaseView.ts":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.topUi=void 0;var i,o,a=(i=e("../../INITConfig"))&&i.__esModule?i:{default:i},n=e("./AbsBaseView");s.topUi=o,function(e){e.BaseView=class extends n.AbsBaseView{constructor(e,t){super(),this.mResName=e,this.mPackageName=t,this.loadRes()}init(){this.initData(),this.registerEvent(),this.initView()}initData(){throw new Error("Method not implemented.")}initView(){throw new Error("Method not implemented.")}registerEvent(){throw new Error("Method not implemented.")}unRegisterEvent(){throw new Error("Method not implemented.")}destroy(){this.unRegisterEvent(),fgui.GRoot.inst.removeChild(this.mParentView)}loadRes(){if(!this.mResName)throw new Error("BaseView need respath to init");let e=a.default.resPrefixPath+this.mResName;fgui.UIPackage.loadPackage(e,Laya.Handler.create(this,this.onLoadedComplete))}onLoadedComplete(){if(!this.mPackageName)throw new Error("BaseView need packageName to create ui");this.mParentView=fgui.UIPackage.createObject(this.mResName,this.mPackageName).asCom,fgui.GRoot.inst.addChild(this.mParentView),this.init()}removeRes(){}getParent(){return this.mParentView}getChild(e){return this.mParentView?this.mParentView.getChild(e):null}}}(o||(s.topUi=o={}))},{"../../INITConfig":"INITConfig.ts","./AbsBaseView":"script/ui/AbsBaseView.ts"}],"script/view/LoginView.ts":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.view=void 0;var i,o=e("../ui/BaseView");s.view=i,function(e){class t extends o.topUi.BaseView{initData(){}initView(){this.getChild("bg").asImage;console.log("initView.......");let e=new fgui.GLoader;e.url="res/webp/s10100_19_260.webp",this.getParent().addChild(e),console.log("initView")}registerEvent(){console.log("loginView registerEvent")}onLoginInit(e,t){console.log("reveice loginInit method  arg0="+e+"arg1="+t)}unRegisterEvent(){}destroy(){super.destroy()}}t.resName="Login",t.packageName="LoginView",e.LoginView=t}(i||(s.view=i={}))},{"../ui/BaseView":"script/ui/BaseView.ts"}],"script/util/Log.ts":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.Log=void 0;var i,o=(i=e("../../InitConfig"))&&i.__esModule?i:{default:i};s.Log=class{static warn(e){o.default.isDebug&&console.warn(e)}static info(e){o.default.isDebug&&console.info(e)}static table(e){o.default.isDebug&&console.table(e)}}},{"../../InitConfig":"INITConfig.ts"}],"script/net/NetWork.ts":[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.net=void 0;var i,o=e("../util/Log");s.net=i,function(e){var t=Laya.Browser,s=Laya.Socket,i=Laya.Byte,a=Laya.Event;class n{constructor(){this.mMessage=null,this.mRoot=null,t.window.protobuf.load("res/protobuf/awesome.proto",(e,t)=>{this.onAssetsLoaded(e,t)}),console.log("NetWork  constructor()")}static getInstance(){return n.instance||(n.instance=new n),n.instance}onAssetsLoaded(e,t){if(console.log("NetWork onAssetsLoaded"+e),e)throw e;console.log("this="+this),console.log("root=",t),this.mRoot=t,this.mMessage=t.lookup("awesomepackage.AwesomeMessage"),console.log("this.mMessage---\x3e>"+this.mMessage);var s=this.mMessage.create({awesomeField:"AwesomeString"}),i=this.mMessage.verify(s);if(i)throw Error(i);var o=this.mMessage.encode(s).finish();o=this.mMessage.encode({awesomeField:"AwesomeString"}).finish(),s=this.mMessage.decode(o);console.log("message = "+s+JSON.stringify(s)),this.connectByUrl("ws://192.168.3.3:8080")}connectByUrl(e){o.Log.info("connectByUrl"),this.socket=new s,this.socket.connectByUrl(e),this.output=this.socket.output,this.socket.on(a.OPEN,this,this.onSocketOpen),this.socket.on(a.CLOSE,this,this.onSocketClose),this.socket.on(a.MESSAGE,this,this.onMessageReveived),this.socket.on(a.ERROR,this,this.onConnectError)}onSocketOpen(){console.log("Connected"),this.socket.endian=Laya.Byte.LITTLE_ENDIAN;this.output.writeUint16(10001),this.mMessage=this.mRoot.lookup("awesomepackage.C2R_Login"),console.log("this.mMessage---\x3e>"+this.mMessage);let e=this.mMessage.create({rpcId:11,Account:"test",Password:"111111"});var t=this.mMessage.verify(e);if(t)throw Error(t);var s=this.mMessage.encode(e).finish();this.output.writeArrayBuffer(s);this.mMessage.decode(s);console.log("decodeMsg = "+e+" = "+JSON.stringify(e)),this.socket.flush(),console.log("消息发送完成")}onSocketClose(){console.log("Socket closed")}onMessageReveived(e){if(console.log("Message from server:"),"string"==typeof e)console.log(e);else if(e instanceof ArrayBuffer){console.log(new i(e).readUTFBytes());for(var t=new Laya.Byte(e);t.length>t.pos;){let e=t.getUint16(),s=t.getUint8Array(t.pos,t.length),i=this.mRoot.lookupType("awesomepackage.S2C_"+e).decode(s);console.log("MessageReveived opCode="+e+"msg="+JSON.stringify(i))}}this.socket.input.clear()}onConnectError(e){console.log("error="+JSON.stringify(e))}}e.NetWork=n}(i||(s.net=i={}))},{"../util/Log":"script/util/Log.ts"}],"Main.ts":[function(e,t,s){"use strict";var i,o=(i=e("./GameConfig"))&&i.__esModule?i:{default:i},a=e("./script/manager/Uimanager"),n=e("./script/view/LoginView"),r=e("./script/net/NetWork"),l=e("./script/util/Log");new class{constructor(){window.Laya3D?Laya3D.init(o.default.width,o.default.height):Laya.init(o.default.width,o.default.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=o.default.scaleMode,Laya.stage.screenMode=o.default.screenMode,Laya.stage.alignV=o.default.alignV,Laya.stage.alignH=o.default.alignH,Laya.URL.exportSceneToJson=o.default.exportSceneToJson,(o.default.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),o.default.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),o.default.stat&&Laya.Stat.show(),Laya.alertGlobalError(!0),Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){Laya.stage.addChild(fgui.GRoot.inst.displayObject),a.UiManager.getInstance().openPanel(n.view.LoginView),Laya.timer.once(2e3,this,()=>{console.log("1111111111")}),console.log("test protocolBuffer"),r.net.NetWork.getInstance(),l.Log.info("Laya.Browser.clientWidth="+Laya.Browser.clientWidth+"Laya.Browser.clientHeight="+Laya.Browser.clientHeight),console.log("checkWebpSupport = "+this.checkWebpSupport())}checkWebpSupport(){var e=Laya.Browser.window.document.createElement("canvas");return e.width=2,e.height=2,e.style.width="2px",e.style.height="2px",!![].map&&0==e.toDataURL("image/webp").indexOf("data:image/webp")}}},{"./GameConfig":"GameConfig.ts","./script/manager/Uimanager":"script/manager/Uimanager.ts","./script/view/LoginView":"script/view/LoginView.ts","./script/net/NetWork":"script/net/NetWork.ts","./script/util/Log":"script/util/Log.ts"}]},{},["Main.ts"]);